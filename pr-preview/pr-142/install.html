<!-- HTML header for doxygen 1.10.0-->
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=11" />
  <meta name="generator" content="Doxygen 1.10.0" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NEML2: Installation Guide</title>
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <script type="text/javascript" src="clipboard.js"></script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  },
  loader: {
    load: ['[tex]/ams','[tex]/physics']
  },
  tex: {
    macros: {},
    packages: ['base','configmacros','ams','physics']
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
  <script type="text/javascript">
    DoxygenAwesomeParagraphLink.init()
  </script>
</head>
<body>
    <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
      <div id="titlearea">
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr id="projectrow">
              <td id="projectalign">
                <div id="projectname">NEML2<span
                    id="projectnumber">&#160;1.4.0</span>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('install.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Installation Guide</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md2">Prerequisites</a></li>
<li class="level1"><a href="#autotoc_md3">Dependencies</a></li>
<li class="level1"><a href="#autotoc_md4">Build, Test, and Install</a></li>
<li class="level1"><a href="#build-customization">Build Customization</a></li>
<li class="level1"><a href="#cmake-integration">CMake integration</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_content_2install"></a></p>
<h1><a class="anchor" id="autotoc_md2"></a>
Prerequisites</h1>
<p>Compiling the NEML2 core library requires</p><ul>
<li>A C++ compiler with C++17 support</li>
<li>CMake &gt;= 3.23</li>
</ul>
<h1><a class="anchor" id="autotoc_md3"></a>
Dependencies</h1>
<h2>Required dependencies</h2>
<ul>
<li><a href="https://pytorch.org/get-started/locally/">PyTorch</a>, version 2.2.2.</li>
</ul>
<p>Other PyTorch releases with a few minor versions around are likely to be compatible. In the PyTorch official download page, several download options are provided: conda, pip, libTorch, and source distribution.</p><ul>
<li><b>Recommended</b> If you choose to download PyTorch using conda or pip, the NEML2 CMake script can automatically detect and use the PyTorch installation.</li>
<li>If you choose to download libTorch or build PyTorch from source, you will need to set <code>LIBTORCH_DIR</code> to be the location of libTorch when using CMake to configure NEML2.</li>
</ul>
<p>If no PyTorch installation can be detected and <code>LIBTORCH_DIR</code> is not set at configure time, the NEML2 CMake script will automatically download and use the libTorch obtained from the official website. Note, however, that this method only works on Linux and Mac systems.</p>
<blockquote class="doxtable">
<p>&zwj;The libTorch distributions from the official website come with two flavors: "Pre-cxx11 ABI" and "cxx11 ABI". Both variants are supported by NEML2. If you are unsure, we recommend the one with "cxx11 ABI". </p>
</blockquote>
<h2>Optional dependencies</h2>
<p><em>No action is needed to manually obtain the optional dependencies.</em> The compatible optional dependencies will be automatically downloaded and configured by CMake depending on the build customization.</p>
<ul>
<li><a href="https://github.com/idaholab/moose/tree/master/framework/contrib/hit">HIT</a> for input file parsing.</li>
<li><a href="https://github.com/catchorg/Catch2">Catch2</a> for unit and regression testing.</li>
<li><a href="https://github.com/gperftools/gperftools">gperftools</a> for profiling.</li>
<li><a href="https://github.com/doxygen/doxygen">Doxygen</a> for building the documentation.</li>
<li><a href="https://github.com/jothepro/doxygen-awesome-css">Doxygen Awesome</a> the documentation theme.</li>
<li>Python packages<ul>
<li>pytest</li>
<li>pandas</li>
<li>matplotlib</li>
<li>PyYAML</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md4"></a>
Build, Test, and Install</h1>
<p>First, obtain the NEML2 source code.</p>
<div class="fragment"><div class="line">git clone https://github.com/reverendbedford/neml2.git</div>
<div class="line">cd neml2</div>
<div class="line">git checkout main</div>
</div><!-- fragment --><p>Then, configure NEML2. See <a class="el" href="#build-customization">build customization</a> for possible configuration options.</p>
<div class="fragment"><div class="line">mkdir build &amp;&amp; cmake -B build .</div>
</div><!-- fragment --><p>Finally, compile NEML2.</p>
<div class="fragment"><div class="line">cd build &amp;&amp; make -j N</div>
</div><!-- fragment --><p> where <code>N</code> is the number of cores to use for parallel compilation.</p>
<p>After the compilation is complete, optionally run the tests to make sure the compilation was successful.</p>
<div class="fragment"><div class="line">make test</div>
</div><!-- fragment --><p>The compiled NEML2 can be installed as a system library.</p>
<div class="fragment"><div class="line">make install</div>
</div><!-- fragment --><h1><a class="anchor" id="build-customization"></a>
Build Customization</h1>
<p>Additional configuration options can be passed via command line using the <code>-DOPTION</code> or <code>-DOPTION=ON</code> format. For example,</p>
<div class="fragment"><div class="line">cmake -DNEML2_DOC=ON -B build .</div>
</div><!-- fragment --><p> turns on the <code>NEML2_DOC</code> option, and additional targets for building the Doxygen documentation will be created inside the Makefile. Note that this would also download additional optional dependencies that are required to build the documentation.</p>
<p>Commonly used configuration options are summarized below. Default options are underlined.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Option   </th><th class="markdownTableHeadLeft">Values (<u>default</u>)   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">CMAKE_BUILD_TYPE   </td><td class="markdownTableBodyLeft"><u>Debug</u>, Release, MinSizeRel, RelWithDebInfo, Coverage   </td><td class="markdownTableBodyLeft">CMake <a href="https://cmake.org/cmake/help/latest/variable/CMAKE_BUILD_TYPE.html">Reference</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">CMAKE_INSTALL_PREFIX   </td><td class="markdownTableBodyLeft"></td><td class="markdownTableBodyLeft">CMake <a href="https://cmake.org/cmake/help/latest/variable/CMAKE_INSTALL_PREFIX.html">Reference</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">CMAKE_UNITY_BUILD   </td><td class="markdownTableBodyLeft"></td><td class="markdownTableBodyLeft">CMake <a href="https://cmake.org/cmake/help/latest/variable/CMAKE_UNITY_BUILD.html">Reference</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">NEML2_DTYPE   </td><td class="markdownTableBodyLeft">Float16, Float32, <u>Float64</u>   </td><td class="markdownTableBodyLeft">Default floating point integral type used in the material models    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">NEML2_INT_DTYPE   </td><td class="markdownTableBodyLeft">Int8, Int16, Int32, <u>Int64</u>   </td><td class="markdownTableBodyLeft">Default fixed point integral type used in the material models    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">NEML2_TESTS   </td><td class="markdownTableBodyLeft"><u>ON</u>, OFF   </td><td class="markdownTableBodyLeft">Master knob for including/excluding all tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">NEML2_UNIT   </td><td class="markdownTableBodyLeft"><u>ON</u>, OFF   </td><td class="markdownTableBodyLeft">Create the unit testing target    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">NEML2_REGRESSION   </td><td class="markdownTableBodyLeft"><u>ON</u>, OFF   </td><td class="markdownTableBodyLeft">Create the regression testing target    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">NEML2_VERIFICATION   </td><td class="markdownTableBodyLeft"><u>ON</u>, OFF   </td><td class="markdownTableBodyLeft">Create the verification testing target    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">NEML2_BENCHMARK   </td><td class="markdownTableBodyLeft">ON, <u>OFF</u>   </td><td class="markdownTableBodyLeft">Create the benchmark testing target    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">NEML2_PROFILING   </td><td class="markdownTableBodyLeft">ON, <u>OFF</u>   </td><td class="markdownTableBodyLeft">Create the profiling executable target    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">NEML2_DOC   </td><td class="markdownTableBodyLeft">ON, <u>OFF</u>   </td><td class="markdownTableBodyLeft">Create the documentation target    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">NEML2_PYBIND   </td><td class="markdownTableBodyLeft">ON, <u>OFF</u>   </td><td class="markdownTableBodyLeft">Create the Python bindings target   </td></tr>
</table>
<h1><a class="anchor" id="cmake-integration"></a>
CMake integration</h1>
<p>Integrating NEML2 into a project that already uses CMake is fairly straightforward. The following CMakeLists.txt snippet links NEML2 into the target executable called <code>foo</code>:</p>
<div class="fragment"><div class="line">add_subdirectory(neml2)</div>
<div class="line"> </div>
<div class="line">add_executable(foo main.cxx)</div>
<div class="line">target_link_libraries(foo neml2)</div>
</div><!-- fragment --><p>The above snippet assumes NEML2 is checked out to the directory <a class="el" href="namespaceneml2.html">neml2</a>, i.e., as a git submodule. Alternatively, you may use CMake's <code>FetchContent</code> module to integrate NEML2 into your project:</p>
<div class="fragment"><div class="line">FetchContent_Declare(</div>
<div class="line">  neml2</div>
<div class="line">  GIT_REPOSITORY https://github.com/reverendbedford/neml2.git</div>
<div class="line">  GIT_TAG v1.4.0</div>
<div class="line">)</div>
<div class="line">FetchContent_MakeAvailable(neml2)</div>
<div class="line"> </div>
<div class="line">add_executable(foo main.cxx)</div>
<div class="line">target_link_libraries(foo neml2)</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
