<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NEML2: Input File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  },
  loader: {
    load: ['[tex]/ams','[tex]/physics','[tex]/boldsymbol']
  },
  tex: {
    macros: {},
    packages: ['base','configmacros','ams','physics','boldsymbol']
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">NEML2<span id="projectnumber">&#160;2.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('input-file.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Input File</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#input-file-syntax">Syntax</a></li>
<li class="level1"><a href="#autotoc_md43">Special syntax</a></li>
<li class="level1"><a href="#cross-referencing">Cross-Referencing</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md__2home_2runner_2work_2neml2_2neml2_2doc_2content_2user_2input__file"></a></p>
<p>The user interface of NEML2 is designed in such a way that no programing experience is required to compose custom material models and define how they are solved. This is achieved using <em>input files</em>. The input files are simply text files with a specific format that NEML2 can understand. NEML2 can <em>deserialize</em> an input file, i.e., parse and create material models specified within the input file.</p>
<p>Since the input files are nothing more than text files saved on the disk, they can be used in any application that supports standard IO, easily exchanged among different devices running different operating systems, and archived for future reference.</p>
<h1><a class="anchor" id="input-file-syntax"></a>
Syntax</h1>
<p>Input files use the Hierarchical Input Text (HIT) format. The syntax looks like this: </p><div class="fragment"><div class="line"><span class="comment"># Comments look like this</span></div>
<div class="line">[block1]</div>
<div class="line">  <span class="comment"># This is a comment</span></div>
<div class="line">  foo = 1</div>
<div class="line">  bar = 3.14159</div>
<div class="line">  baz = <span class="stringliteral">&#39;string value&#39;</span></div>
<div class="line">  [nested_block]</div>
<div class="line">    <span class="comment"># ...</span></div>
<div class="line">  []</div>
<div class="line">[]</div>
</div><!-- fragment --><p> where key-value pairs are defined under (nested) blocks denoted by square brackets. A value can be an integer, floating-point number, string, or array (as indicated by single quotes). Note that the block indentation is recommended for clarity but is not required.</p>
<p>All NEML2 capabilities that can be defined through the input file fall under a number of <em>systems</em>. Names of the top-level blocks specify the systems. For example, the following input file </p><div class="fragment"><div class="line">[Tensors]</div>
<div class="line">  [E]</div>
<div class="line">    <span class="comment"># ...</span></div>
<div class="line">  []</div>
<div class="line">[]</div>
<div class="line"> </div>
<div class="line">[Models]</div>
<div class="line">  [elasticity]</div>
<div class="line">    type = LinearIsotropicElasticity</div>
<div class="line">    youngs_modulus = <span class="stringliteral">&#39;E&#39;</span></div>
<div class="line">    poisson_ratio = 0.3</div>
<div class="line">  []</div>
<div class="line">[]</div>
</div><!-- fragment --><p> defines a tensor named "E" under the <code>[Tensors]</code> block and a model named "elasticity" under the <code>[Models]</code> block. Notice that an object (in this case the tensor named "E" under the <code>[Tensors]</code> section) can be referenced by an input option (in this case "youngs_modulus") by its name, and this mechanism is referred to as <a class="el" href="#cross-referencing">cross-referencing</a>. The <a class="el" href="syntax-tensors.html">Syntax Documentation</a> provides a complete list of objects that can be defined by an input file. The <a class="el" href="system-tensors.html">System Documentation</a> provides detailed explanation of each system.</p>
<dl class="section note"><dt>Note</dt><dd>The ordering of objects, i.e., the sequence objects appear in the input file, does not change their behavior.</dd></dl>
<h1><a class="anchor" id="autotoc_md43"></a>
Special syntax</h1>
<p><b>Boolean</b>: Oftentimes the behavior of the object is preferrably controlled by a boolean flag. However, since the HIT format only allows (array of) integer, floating-point number, and string, a special syntax shall be reserved for boolean values. In NEML2 input files, a string with value "true" can be parsed into a boolean <code>true</code>, and a string with value "false" can be parsed into a boolean <code>false</code>.</p>
<dl class="section note"><dt>Note</dt><dd>On the other hand, other commonly used boolean flags such as "on"/"off", "1"/"0", "True"/"False", etc., cannot be parsed into boolean values.</dd></dl>
<p><b>Variable name</b>: NEML2 material models work with named variables to assign physical meanings to different slices of a tensor (see e.g. Tensor Labeling). A fully qualified variable name can be parsed from a string, and the delimiter "/" signifies nested sub-axes. For example, the string "forces/t" can be parsed into a variable named "t" defined on the sub-axis named "forces".</p>
<p><b>Tensor shape</b>: Shape of a tensor can also be parsed from a string. The string must start with "(" and end with ")". An array of comma-separated integers must be enclosed by the parentheses. For example, the string "(5,6,7)" can be parsed into a shape tuple of value <code>(5, 6, 7)</code>. Note that white spaces are not allowed between the parentheses and could lead to undefined behavior. An empty array, i.e. "()", however, is allowed and fully supported.</p>
<h1><a class="anchor" id="cross-referencing"></a>
Cross-Referencing</h1>
<p>The cross-referencing mechanism allows object options in the input file to <em>reference</em> another object by name. All manufacturable objects, i.e., objects listed in the <a class="el" href="syntax-tensors.html">syntax documentation</a>, can be referenced by name. An example of referencing object by name is shown below. </p><div class="fragment"><div class="line">[Solvers]</div>
<div class="line">  [newton]</div>
<div class="line">    type = Newton</div>
<div class="line">  []</div>
<div class="line">[]</div>
<div class="line"> </div>
<div class="line">[Models]</div>
<div class="line">  <span class="comment"># Other objects defining &#39;implicit_model&#39; are omitted for brevity</span></div>
<div class="line">  [model]</div>
<div class="line">    type = ImplicitUpdate</div>
<div class="line">    implicit_model = <span class="stringliteral">&#39;implicit_rate&#39;</span></div>
<div class="line">    solver = <span class="stringliteral">&#39;newton&#39;</span></div>
<div class="line">  []</div>
<div class="line">[]</div>
</div><!-- fragment --><p> In the above example, the object of type <code>ImplicitUpdate</code> references an implicit model named "implicit_rate" and a solver named "newton".</p>
<p>In addition to directly referencing objects by their names, a few special types support more flexible referencing mechanisms. <code>torch::Tensor</code>, <code>Tensor</code>, and all primitive tensor types with fixed base shapes such as <code>Scalar</code>, <code>SR2</code>, etc, can be referenced either by value or by name.</p>
<p>When a tensor is referenced by value, the parser will parse the input option value as a numeric literal and return a tensor filled with the specified value; when a tensor is referenced by name, the parser will look for and return the object under the <code>[Tensors]</code> section with the given name.</p>
<p>In the following example, </p><div class="fragment"><div class="line">[Tensors]</div>
<div class="line">  [p0]</div>
<div class="line">    type = LinspaceScalar</div>
<div class="line">    start = 1</div>
<div class="line">    end = 10</div>
<div class="line">    nstep = 5</div>
<div class="line">  []</div>
<div class="line">[]</div>
<div class="line"> </div>
<div class="line">[Models]</div>
<div class="line">  [p]</div>
<div class="line">    type = ArrheniusParameter</div>
<div class="line">    temperature = <span class="stringliteral">&#39;forces/T&#39;</span></div>
<div class="line">    reference_value = <span class="stringliteral">&#39;p0&#39;</span></div>
<div class="line">    activation_energy = 1e3</div>
<div class="line">    ideal_gas_constant = 8.314</div>
<div class="line">  []</div>
<div class="line">[]</div>
</div><!-- fragment --><p> option "reference_value" is referenced by its name "p0", and hence an object with the corresponding name must exist under the <code>[Tensors]</code> section. The option "activation_energy" is referenced by value, and a <code>Scalar</code> filled with the given value <code>1e3</code> is returned. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
