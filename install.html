<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NEML2: Getting Started</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  },
  loader: {
    load: ['[tex]/ams','[tex]/physics']
  },
  tex: {
    macros: {},
    packages: ['base','configmacros','ams','physics']
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">NEML2<span id="projectnumber">&#160;1.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('install.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Getting Started</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md1">Choose the compute platform</a></li>
<li class="level1"><a href="#autotoc_md2">Dependencies</a></li>
<li class="level1"><a href="#autotoc_md3">Install NEML2</a></li>
<li class="level1"><a href="#NotesOnObtainingTheDependencies">Notes on obtaining the dependencies</a></li>
<li class="level1"><a href="#user">Quick Start</a></li>
<li class="level1"><a href="#autotoc_md4">Next steps</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="autotoc_md1"></a>
Choose the compute platform</h1>
<p>NEML2 can be compiled to support two compute platforms:</p><ul>
<li>CPU</li>
<li>CUDA</li>
</ul>
<p>Choose the CPU compute platform if you only need to run NEML2 using CPUs. Choose the CUDA compute platform if you plan to take advantage of the GPU(s) of the computer.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Dependencies</h1>
<p>NEML2 depends on the following drivers/packages/libraries: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">CPU   </th><th class="markdownTableHeadCenter">CUDA   </th><th class="markdownTableHeadLeft">Dependency   </th><th class="markdownTableHeadLeft">Version    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyLeft">C++ compiler   </td><td class="markdownTableBodyLeft">&gt;=17    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyLeft">CMake   </td><td class="markdownTableBodyLeft">&gt;=3.1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyLeft">libTorch   </td><td class="markdownTableBodyLeft"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyLeft">CUDA toolkit   </td><td class="markdownTableBodyLeft"></td></tr>
</table>
<p>See <a class="el" href="install.html#NotesOnObtainingTheDependencies">notes on obtaining the dependencies</a> for some guidance.</p>
<p>For developers, some additional dependencies are recommended (regardless of the compute platform):</p><ul>
<li><a href="https://www.doxygen.nl/">Doxygen</a>, the documentation generator</li>
<li><a href="https://clang.llvm.org/docs/ClangFormat.html">clang-format</a>, the C++ code formatter</li>
</ul>
<h1><a class="anchor" id="autotoc_md3"></a>
Install NEML2</h1>
<p>First, obtain the NEML2 source code.</p>
<div class="fragment"><div class="line">git clone https://github.com/reverendbedford/neml2.git</div>
<div class="line">cd neml2</div>
<div class="line">git checkout main</div>
<div class="line">git submodule update --recursive --init</div>
</div><!-- fragment --><p>Then, configure NEML2 and generate the Makefile.</p>
<div class="fragment"><div class="line">cmake -DCMAKE_PREFIX_PATH=/path/to/torch/share/cmake .</div>
</div><!-- fragment --><p> where <code>/path/to/torch/share/cmake</code> is the path to the <code>share/cmake</code> directory of your libTorch installation.</p>
<p>Finally, compile NEML2.</p>
<div class="fragment"><div class="line">make -j N</div>
</div><!-- fragment --><p> where <code>N</code> is the number of processors to use for parallel compilation.</p>
<p>After the compilation finishes, you can run the tests to make sure the build was successful: </p><div class="fragment"><div class="line">make test</div>
</div><!-- fragment --><h1><a class="anchor" id="NotesOnObtainingTheDependencies"></a>
Notes on obtaining the dependencies</h1>
<p>Feel free to create a ticket at <a href="https://github.com/reverendbedford/neml2/issues">https://github.com/reverendbedford/neml2/issues</a> if you run into issues about installing the dependencies.</p>
<p>Typically, the C++ compiler, a reasonably modern CMake, Doxygen, and clang-format can be obtained via the system package manager.</p>
<p>libTorch can be downloaded from the official PyTorch website: <a href="https://pytorch.org/get-started/locally/">https://pytorch.org/get-started/locally/</a>. Choose the compute platform in consistency with the NEML2 compute platform. Also take a note of the version of the libTorch-compatible CUDA if you chose CUDA as the compute platform. Note that there are two versions of libTorch: "Pre-cxx11 ABI" and "cxx11 ABI". Both versions are supported by NEML2. If you are unsure, we recommend the one with "cxx11 ABI".</p>
<blockquote class="doxtable">
<p>&zwj;In the future we may provide an option to automatically install a compatible version of libTorch. </p>
</blockquote>
<p>There are many ways of installing the NVIDIA driver and the CUDA toolkit. We will not try to make a recommendation here. However, do make sure the NVIDIA driver is compatible with your GPU. It is also recommended to install a CUDA toolkit with the same version number as the libTorch CUDA version.</p>
<h1><a class="anchor" id="user"></a>
Quick Start</h1>
<p>NEML2 uses the <a href="https://github.com/idaholab/hit">HIT</a> format, a simple hierarchical text language, for model specification. More generally speaking, HIT is the canonical language used in NEML2 for serialization, deserialization, and archival purposes.</p>
<p>The NEML2 input files have extension <code>.i</code>. An example input file is shown below </p><div class="fragment"><div class="line">[Tensors]</div>
<div class="line">  [end_time]</div>
<div class="line">    type = LogSpaceTensor</div>
<div class="line">    start = -1</div>
<div class="line">    end = 5</div>
<div class="line">    steps = 20</div>
<div class="line">  []</div>
<div class="line">  [times]</div>
<div class="line">    type = LinSpaceTensor</div>
<div class="line">    end = end_time</div>
<div class="line">    steps = 100</div>
<div class="line">  []</div>
<div class="line">  [max_strain]</div>
<div class="line">    type = InitializedSymR2</div>
<div class="line">    values = <span class="stringliteral">&#39;0.1 -0.05 -0.05&#39;</span></div>
<div class="line">    nbatch = 20</div>
<div class="line">  []</div>
<div class="line">  [strains]</div>
<div class="line">    type = LinSpaceTensor</div>
<div class="line">    end = max_strain</div>
<div class="line">    steps = 100</div>
<div class="line">  []</div>
<div class="line">[]</div>
<div class="line"> </div>
<div class="line">[Drivers]</div>
<div class="line">  [driver]</div>
<div class="line">    type = SolidMechanicsDriver</div>
<div class="line">    model = <span class="stringliteral">&#39;model&#39;</span></div>
<div class="line">    times = <span class="stringliteral">&#39;times&#39;</span></div>
<div class="line">    prescribed_strains = <span class="stringliteral">&#39;strains&#39;</span></div>
<div class="line">    save_as = <span class="stringliteral">&#39;result.pt&#39;</span></div>
<div class="line">  []</div>
<div class="line">  [regression]</div>
<div class="line">    type = TransientRegression</div>
<div class="line">    driver = <span class="stringliteral">&#39;driver&#39;</span></div>
<div class="line">    reference = <span class="stringliteral">&#39;gold/result.pt&#39;</span></div>
<div class="line">  []</div>
<div class="line">[]</div>
<div class="line"> </div>
<div class="line">[Solvers]</div>
<div class="line">  [newton]</div>
<div class="line">    type = Newton</div>
<div class="line">  []</div>
<div class="line">[]</div>
<div class="line"> </div>
<div class="line">[Models]</div>
<div class="line">  [implicit_rate]</div>
<div class="line">    type = ComposedModel</div>
<div class="line">    models = <span class="stringliteral">&#39;mandel_stress vonmises yield normality flow_rate Eprate Erate Eerate elasticity integrate_stress&#39;</span></div>
<div class="line">  []</div>
<div class="line">  [model]</div>
<div class="line">    type = ImplicitUpdate</div>
<div class="line">    implicit_model = <span class="stringliteral">&#39;implicit_rate&#39;</span></div>
<div class="line">    solver = <span class="stringliteral">&#39;newton&#39;</span></div>
<div class="line">  []</div>
<div class="line">[]</div>
</div><!-- fragment --><p> There are four top-level sections:</p><ul>
<li><code>[Tensors]</code>: Tensors specified from within the input file.</li>
<li><code>[Solvers]</code>: Solvers for solving an implicit model.</li>
<li><code>[Models]</code>: NEML2 constitutive models.</li>
<li><code>[Drivers]</code>: Drivers used to evaluate/test models.</li>
</ul>
<p>The user has full control over the sub-sections under the top-level sections, called <em>objects</em>. The sub-section name is used as the name of the object. Each object reserves a special field named "type". NEML2 parses the value in the "type" field and constructs the corresponding object at run time. The syntax and options for all objects are listed in the <a class="el" href="syntax.html">syntax documentation</a>.</p>
<p>Currently, NEML2 does not maintain a set of examples. However, the regression tests shall serve as decent input file templates. The regression tests are located in <code>/tests/regression</code> in the repository.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Next steps</h1>
<p>Depending on your specific use case, the following resources might be useful:</p>
<ul>
<li><a class="el" href="math.html">Mathematical conventions</a> introduces the common mathematical notations used throughout this documentation.</li>
<li><a class="el" href="impl.html">Implementation</a> describes the basics of the library architecture and design philosophy. They can be a good starting point if you want to create your own material model within the NEML2 framework.</li>
<li><a class="el" href="devel.html">Model development</a> is a step-by-step guide for building a constitutive model. It uses the small deformation \(J_2\) isotropic viscoplasticity as an example.</li>
<li><a href="https://reverendbedford.github.io/neml2/annotated.html">Class list</a> is a complete list of class doxygen documentations. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
